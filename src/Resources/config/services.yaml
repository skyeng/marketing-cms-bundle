services:
  _defaults:
    autowire: true
    autoconfigure: true

  Skyeng\MarketingCmsBundle\:
    resource: '../../*'
    exclude:
      - '../../tests'
      - '../../**/{Dto,ValueObject,Model,Entity,Exception}/*.php'
      - '../../Domain/{Exception,Traits,Entity,Event}'
      - '../../Domain/{Exception,Traits,Entity,Event}/*.php'
      - '../../Domain/{Exception,Traits,Entity,Event}/**/*.php'

  marketing_cms_bundle.listener.media_file_updated_listener:
    class: Skyeng\MarketingCmsBundle\Application\EventListener\MediaFileUpdatedListener
    tags:
      - { name: kernel.event_listener, event: vich_uploader.pre_upload, method: onVichUploaderPreUpdate }

  Skyeng\MarketingCmsBundle\UI\Controller\Admin\PageCrudController:
    calls:
      - setPageFrontendUrlResolver: ['@?cms_bundle_page_frontend_url_resolver']

  Skyeng\MarketingCmsBundle\UI\Command\MakeComponentMaker:
    arguments: ['@maker.generator']
